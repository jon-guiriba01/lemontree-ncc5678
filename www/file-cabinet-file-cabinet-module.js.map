{"version":3,"sources":["webpack:///./src/app/file-cabinet/file-cabinet.module.ts","webpack:///./src/app/file-cabinet/file-cabinet.page.html","webpack:///./src/app/file-cabinet/file-cabinet.page.scss","webpack:///./src/app/file-cabinet/file-cabinet.page.ts"],"names":[],"mappings":"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","file":"file-cabinet-file-cabinet-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FileCabinetPage } from './file-cabinet.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FileCabinetPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [FileCabinetPage]\n})\nexport class FileCabinetPageModule {}\n","module.exports = \"<ion-content padding style='position: relative;'>\\n\\n\\t<ion-row>\\n\\t\\t<ion-item class='filter-row' lines='none'>\\n\\t\\t\\t<img class='filter-icon' src='assets/imgs/settings_icon.png'/>\\n\\t\\t\\t<label>Filter</label>\\n\\n\\t\\t\\t<ion-select class='filter-select' [(ngModel)]=\\\"selectedDepartment\\\" (ionChange)='filterDownloadListByGroup()'>\\n\\t\\t\\t  <ion-select-option *ngFor='let group of groups' value=\\\"{{group}}\\\">{{group | uppercase}}</ion-select-option>\\n\\t\\t\\t</ion-select>\\n\\t\\t</ion-item>\\n\\t</ion-row>\\n\\n\\t<ion-list>\\n\\t\\t<div *ngFor=\\\"let file of storageService.files\\\">\\n\\t\\t\\t<ion-item *ngIf='( \\n\\t\\t\\t\\tfile.name.toLowerCase().includes(searchService.searchInput.toLowerCase()\\n\\t\\t\\t\\t) || searchService.searchInput == \\\"\\\" \\n\\t\\t\\t) \\n\\t\\t\\t&& (\\n\\t\\t\\tselectedDepartment == \\\"showall\\\" || selectedDepartment == file.group) '>\\n\\t\\t\\t\\n\\t\\t\\t  <ion-label>{{file.name}}</ion-label>\\n\\t\\t\\t  <ion-button (click)='onClickDownload(file, $event)' class='download-btn'>\\n\\t\\t\\t  \\t<ion-icon name='download'></ion-icon>\\n\\t\\t\\t  </ion-button>\\n\\t\\t\\t  <ion-button (click)='onClickDelete(file, $event)' class='delete-btn'>\\n\\t\\t\\t  \\t<ion-icon name='close'></ion-icon>\\n\\t\\t\\t  </ion-button>\\n\\t\\t\\t</ion-item>\\n\\t\\t</div>\\n\\t</ion-list>\\n\\n\\n  <ion-fab-button size=\\\"small\\\" class=\\\"upload-fab\\\" (click)=\\\"upload()\\\">\\n  \\t<input type=\\\"file\\\" name=\\\"\\\" style='display: none;' class='hidden-input'/>\\n  \\t<ion-icon name=\\\"add\\\"></ion-icon>\\n  </ion-fab-button>\\n</ion-content>\\n\"","module.exports = \".upload-fab {\\n  position: fixed;\\n  right: 45px;\\n  bottom: 15px;\\n  --background: var(--ion-color-secondary); }\\n  @media (max-width: 599px) {\\n    .upload-fab {\\n      right: 0px;\\n      bottom: 5px; } }\\n  .download-btn {\\n  --background: var(--green); }\\n  .delete-btn {\\n  --background: var(--red); }\\n  .filter-row {\\n  width: 100%;\\n  display: flex;\\n  justify-content: center;\\n  margin-bottom: 18px; }\\n  .filter-select {\\n  background: var(--blue);\\n  color: var(--ion-color-light);\\n  margin-left: 16px;\\n  min-width: 140px; }\\n  @media (max-width: 599px) {\\n    .filter-select {\\n      height: 25px;\\n      font-size: 12px;\\n      padding: 4px 4px 4px 8px; } }\\n  .filter-icon {\\n  width: 18px;\\n  height: 18px;\\n  margin-right: 8px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZmlsZS1jYWJpbmV0L0M6XFxVc2Vyc1xcSm9uXFxQcm9qZWN0c1xcRExTVS1OQ0MtNTY3OC1mcmVlbGFuY2Uvc3JjXFxhcHBcXGZpbGUtY2FiaW5ldFxcZmlsZS1jYWJpbmV0LnBhZ2Uuc2NzcyIsInNyYy9hcHAvZmlsZS1jYWJpbmV0L0M6XFxVc2Vyc1xcSm9uXFxQcm9qZWN0c1xcRExTVS1OQ0MtNTY3OC1mcmVlbGFuY2Uvc3JjXFxhcHBcXG1vYmlsZV9taXhpbi5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBQ0UsZUFBZTtFQUNmLFdBQVc7RUFDWCxZQUFZO0VBQ1osd0NBQWEsRUFBQTtFQ0NYO0lETEo7TUFPSSxVQUFVO01BQ1YsV0FBVyxFQUFBLEVBRWQ7RUFFRDtFQUNDLDBCQUFhLEVBQUE7RUFHZDtFQUNDLHdCQUFhLEVBQUE7RUFHZDtFQUNDLFdBQVc7RUFDWCxhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLG1CQUFtQixFQUFBO0VBSXBCO0VBQ0MsdUJBQXVCO0VBQ3ZCLDZCQUE2QjtFQUM3QixpQkFBaUI7RUFDakIsZ0JBQWdCLEVBQUE7RUMzQmI7SUR1Qko7TUFRRSxZQUFZO01BQ1osZUFBZTtNQUNmLHdCQUF3QixFQUFBLEVBRXpCO0VBRUQ7RUFDQyxXQUFXO0VBQ1gsWUFBWTtFQUNaLGlCQUFpQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvZmlsZS1jYWJpbmV0L2ZpbGUtY2FiaW5ldC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICcuLi9tb2JpbGVfbWl4aW4nO1xyXG5cclxuLnVwbG9hZC1mYWJ7XHJcbiAgcG9zaXRpb246IGZpeGVkO1xyXG4gIHJpZ2h0OiA0NXB4O1xyXG4gIGJvdHRvbTogMTVweDtcclxuICAtLWJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnkpO1xyXG5cclxuICBAaW5jbHVkZSBmb3Itc2l6ZShwaG9uZS1vbmx5KSB7XHJcbiAgICByaWdodDogMHB4O1xyXG4gICAgYm90dG9tOiA1cHg7XHJcbiAgfVxyXG59XHJcblxyXG4uZG93bmxvYWQtYnRue1xyXG5cdC0tYmFja2dyb3VuZDogdmFyKC0tZ3JlZW4pO1xyXG59XHJcblxyXG4uZGVsZXRlLWJ0bntcclxuXHQtLWJhY2tncm91bmQ6IHZhcigtLXJlZCk7XHJcbn1cclxuXHJcbi5maWx0ZXItcm93e1xyXG5cdHdpZHRoOiAxMDAlO1xyXG5cdGRpc3BsYXk6IGZsZXg7XHJcblx0anVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcblx0bWFyZ2luLWJvdHRvbTogMThweDtcclxuXHJcbn1cclxuXHJcbi5maWx0ZXItc2VsZWN0e1xyXG5cdGJhY2tncm91bmQ6IHZhcigtLWJsdWUpO1xyXG5cdGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbGlnaHQpO1xyXG5cdG1hcmdpbi1sZWZ0OiAxNnB4O1xyXG5cdG1pbi13aWR0aDogMTQwcHg7XHJcblxyXG5cclxuICBAaW5jbHVkZSBmb3Itc2l6ZShwaG9uZS1vbmx5KSB7XHJcblx0XHRoZWlnaHQ6IDI1cHg7XHJcblx0XHRmb250LXNpemU6IDEycHg7XHJcblx0XHRwYWRkaW5nOiA0cHggNHB4IDRweCA4cHg7XHJcblx0ICB9XHJcbn1cclxuXHJcbi5maWx0ZXItaWNvbntcclxuXHR3aWR0aDogMThweDtcclxuXHRoZWlnaHQ6IDE4cHg7XHJcblx0bWFyZ2luLXJpZ2h0OiA4cHg7XHJcbn0iLCJAbWl4aW4gZm9yLXNpemUoJHJhbmdlKSB7XHJcbiAgJHBob25lLXVwcGVyLWJvdW5kYXJ5OiA2MDBweDtcclxuICAkdGFibGV0LXBvcnRyYWl0LXVwcGVyLWJvdW5kYXJ5OiA5MDBweDtcclxuICAkdGFibGV0LWxhbmRzY2FwZS11cHBlci1ib3VuZGFyeTogMTIwMHB4O1xyXG4gICRkZXNrdG9wLXVwcGVyLWJvdW5kYXJ5OiAxODAwcHg7XHJcblxyXG4gIEBpZiAkcmFuZ2UgPT0gcGhvbmUtb25seSB7XHJcbiAgICBAbWVkaWEgKG1heC13aWR0aDogI3skcGhvbmUtdXBwZXItYm91bmRhcnkgLSAxfSkgeyBAY29udGVudDsgfVxyXG4gIH0gQGVsc2UgaWYgJHJhbmdlID09IHRhYmxldC1wb3J0cmFpdC11cCB7XHJcbiAgICBAbWVkaWEgKG1pbi13aWR0aDogJHBob25lLXVwcGVyLWJvdW5kYXJ5KSB7IEBjb250ZW50OyB9XHJcbiAgfSBAZWxzZSBpZiAkcmFuZ2UgPT0gdGFibGV0LWxhbmRzY2FwZS11cCB7XHJcbiAgICBAbWVkaWEgKG1pbi13aWR0aDogJHRhYmxldC1wb3J0cmFpdC11cHBlci1ib3VuZGFyeSkgeyBAY29udGVudDsgfVxyXG4gIH0gQGVsc2UgaWYgJHJhbmdlID09IGRlc2t0b3AtdXAge1xyXG4gICAgQG1lZGlhIChtaW4td2lkdGg6ICR0YWJsZXQtbGFuZHNjYXBlLXVwcGVyLWJvdW5kYXJ5KSB7IEBjb250ZW50OyB9XHJcbiAgfSBAZWxzZSBpZiAkcmFuZ2UgPT0gYmlnLWRlc2t0b3AtdXAge1xyXG4gICAgQG1lZGlhIChtaW4td2lkdGg6ICRkZXNrdG9wLXVwcGVyLWJvdW5kYXJ5KSB7IEBjb250ZW50OyB9XHJcbiAgfVxyXG59Il19 */\"","import { Component, OnInit } from '@angular/core';\ndeclare var gapi: any\nimport * as config from '../../config'\nimport { AuthService } from '../services/auth.service';\nimport { StorageService } from '../services/storage.service';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport * as $ from 'jquery'\nimport { SearchService } from '../services/search.service';\nimport { AlertController } from '@ionic/angular';\n\n\n\n@Component({\n  selector: 'app-file-cabinet',\n  templateUrl: './file-cabinet.page.html',\n  styleUrls: ['./file-cabinet.page.scss'],\n})\nexport class FileCabinetPage implements OnInit {\n\n  groups = [\n    'admin'\n    , 'operations'\n    , 'marketing'\n    , 'camps'\n    , 'showall'\n  ]\n\n  selectedDepartment = 'showall'\n\n\n  constructor(\n    public authService: AuthService\n    , public afStorage: AngularFireStorage\n    , public storageService: StorageService\n    , public searchService: SearchService\n    , public alertController: AlertController\n  ) {\n    this.loadGapi().then((res)=>{\n        console.log(res);\n    })\n  }\n\n  files = [\n  ]\n  \n  ngOnInit() {\n  }\n\n  upload(){\n\n    $('.hidden-input').click()\n\n    $('.hidden-input').change((e:any)=>{\n        e.stopImmediatePropagation();\n        var file = e.target.files[0];\n        console.log('The file \"' + file.name +  '\" has been selected.');\n        this.storageService.uploadFile(file, this.selectedDepartment)\n    });\n\n  }\n\n\n  loadGapi(){\n    return new Promise((resolve,reject)=>{\n      gapi.load('client:auth2', _=> {\n\n        gapi.client.init({\n            'apiKey': config.google.apikey,\n            'clientId': config.google.webClientId,\n            'scope': 'https://www.googleapis.com/auth/drive',\n            'discoveryDocs': [\n              'https://www.googleapis.com/discovery/v1/apis/drive/v3/rest',\n              'https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest'\n            ]\n        }).then(function () {\n            resolve(gapi)\n            let gAuth = gapi.auth2.getAuthInstance();\n              console.log('gAuth',gAuth)\n              console.log('gapi',gapi)\n\n              let test = gapi.client.drive.files.list()\n              console.log(\"test \", test)\n            // Listen for sign-in state changes.\n            gAuth.isSignedIn.listen((res)=>{\n              console.log('listen gapi',res)\n            });\n        });\n      })\n\n    })\n  }\n\n  onClickDownload(file, event){\n    this.storageService.downloadFile(file)\n  }\n\n\n  async onClickDelete(file, event){\n\n    const alert = await this.alertController.create({\n      header: 'File Delete',\n      message: 'Are you sure <strong>delete</strong>!!!',\n      buttons: [\n        {\n          text: 'No',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: (blah) => {\n          }\n        }, {\n          text: 'Yes',\n          handler: () => {\n            this.storageService.deleteFile(file)\n\n          }\n        }\n      ]\n    });\n\n    await alert.present();  \n  }\n\n  filterDownloadListByGroup(){\n    \n  }\n\n\n   // var fileMetadata = {\n    //   'name': 'photo.jpg'\n    // };\n    // var media = {\n    //   mimeType: 'image/jpeg',\n    //   body: fs.createReadStream('files/photo.jpg')\n    // };\n    // gapi.client.drive.files.create({\n    //   resource: fileMetadata,\n    //   media: media,\n    //   fields: 'id'\n    // }, function (err, file) {\n    //   if (err) {\n    //     // Handle error\n    //     console.error(err);\n    //   } else {\n    //     console.log('File Id: ', file.id);\n    //   }\n    // });\n\n\n    // var docId = '...';\n    // var content = 'Hello World';\n    // var contentBlob = new  Blob([content], {\n    //   'type': 'text/plain'\n    // });\n\n    // var xhr = new XMLHttpRequest();\n    // xhr.responseType = 'json';\n    // let accessToken = this.authService.user.credential.accessToken;\n    // console.log(\"using token \", accessToken)\n    // console.log(\"from \", this.authService.user)\n    // xhr.onreadystatechange = function() {\n    //   if (xhr.readyState != XMLHttpRequest.DONE) {\n    //     return;\n    //   }\n    //   console.log(xhr.response);\n    // };\n    // xhr.open('POST', 'https://www.googleapis.com/upload/drive/v3/files/?uploadType=media');\n    // // xhr.open('POST', 'https://www.googleapis.com/upload/drive/v3/files/' + fileId + '?uploadType=media');\n    // xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);\n    // xhr.send(contentBlob);\n\n}\n"],"sourceRoot":""}